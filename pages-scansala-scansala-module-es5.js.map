{"version":3,"sources":["./src/app/pages/scansala/scansala.page.html","./src/app/pages/scansala/scansala.module.ts","./src/app/pages/scansala/scansala.page.scss","./src/app/pages/scansala/scansala.page.ts","./src/app/services/ui-service.service.ts"],"names":[],"mappings":"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","file":"pages-scansala-scansala-module-es5.js","sourcesContent":["module.exports = \"<ion-header no-border>\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\"><ion-back-button defaultHref=\\\"asistentes\\\"></ion-back-button></ion-buttons>\\n    </ion-toolbar>\\n  </ion-header>\\n  <ion-content>\\n    <ion-slides [options]=\\\"slideOptions\\\">\\n      <ion-slide>\\n        <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" (click)=\\\"scan()\\\" size=\\\"large\\\">Scanear CÃ³digo</ion-button>\\n      </ion-slide>\\n    </ion-slides>\\n  </ion-content>\\n  \"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ScansalaPage } from './scansala.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ScansalaPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ScansalaPage]\n})\nexport class ScansalaPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NjYW5zYWxhL3NjYW5zYWxhLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport { Storage } from '@ionic/storage';\nimport { UiServiceService } from '../../services/ui-service.service';\nimport { SalaService } from '../../services/sala.service';\nimport { AsistenteService } from '../../services/asistente.service';\n\n@Component({\n  selector: 'app-scansala',\n  templateUrl: './scansala.page.html',\n  styleUrls: ['./scansala.page.scss'],\n})\nexport class ScansalaPage implements OnInit {\n\n  slideOptions = {\n    allowSlidePrev: false,\n    allowSlideNext: false,\n  };\n\n  codeQr: string;\n  post: any;\n  sala: any;\n  asistente: any = {};\n\n  constructor(private barCodeScanner: BarcodeScanner,\n              private storage: Storage,\n              private asistenteService: AsistenteService,\n              private salaService: SalaService,\n              private uiService: UiServiceService) { }\n\n  ngOnInit() {\n    this.scan();\n    this.cargarPost();\n    this.cargarSala();\n  }\n\n  scan() {\n    this.barCodeScanner.scan().then(barcodeData => {\n      console.log(barcodeData);\n      if (barcodeData.text !== '') {\n        this.codeQr = barcodeData.text;\n        this.verificarCode();\n      }\n     }).catch(err => {\n         console.log('Error', err);\n     });\n  }\n\n  async cargarPost() {\n    this.post = await this.storage.get('post');\n  }\n\n  async cargarSala() {\n    this.sala = await this.storage.get('sala');\n  }\n\n   verificarCode() {\n    this.asistenteService.evaluateCodeQr(this.post, this.codeQr).subscribe(\n      async response => {\n        if(response['ok']){\n          this.asistente = response['asistente'];\n          const value =  await this.salaService.createSalaAsistente(this.sala, this.asistente._id, this.post);\n\n          if (value) {\n            const message = this.asistente.name\n                          + ' ' + this.asistente.appaterno\n                          + ' se registro a esta sala!';\n            this.uiService.alertaInformativa(message);\n          } else {\n            const message = 'Este asistente ya se encuentra registrado a esta sala!';\n            this.uiService.alertaInformativa(message);\n          }\n        } else {\n          const message = response['mensaje'];\n          this.uiService.alertaInformativa(message);\n        }\n      }\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController, ToastController } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UiServiceService {\n\n  constructor(private alertController: AlertController, private toastController: ToastController) { }\n\n  async alertaInformativa(message: string) {\n    const alert = await this.alertController.create({\n      message,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  async presentToast(message: string) {\n    const toast = await this.toastController.create({\n      message,\n      position: 'top',\n      duration: 1500\n    });\n    toast.present();\n  }\n\n\n}\n"],"sourceRoot":""}